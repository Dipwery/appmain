<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DHRUVA POWER - Advanced Manager</title>
    
    <link rel="stylesheet" href="style.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.2/html2pdf.bundle.min.js"></script>
    
    <script type="module" src="main.js"></script>
    
</head>
<body>
    
    <div id="side-menu">
        <div class="menu-header">
            <h3 id="menuEmailDisplay"></h3>
            <button class="close-btn" onclick="toggleMenu()">√ó</button>
        </div>
        
        <div class="menu-items">
            <button onclick="showSection('dashboard-view'); toggleMenu()">‡¶°‡ßç‡¶Ø‡¶æ‡¶∂‡¶¨‡ßã‡¶∞‡ßç‡¶°</button>
            <button onclick="showSection('monthly-report-view'); toggleMenu()">‡¶Æ‡¶æ‡¶∏‡¶ø‡¶ï ‡¶∞‡¶ø‡¶™‡ßã‡¶∞‡ßç‡¶ü</button>
            <button onclick="showSection('history-view'); toggleMenu()">‡¶≤‡ßá‡¶®‡¶¶‡ßá‡¶® ‡¶á‡¶§‡¶ø‡¶π‡¶æ‡¶∏</button>
            <button onclick="downloadPDF(); toggleMenu()">PDF ‡¶°‡¶æ‡¶â‡¶®‡¶≤‡ßã‡¶°</button>
            
            <div class="separator"></div>

            <button onclick="logoutUser()" class="logout-btn">‡¶≤‡¶ó-‡¶Ü‡¶â‡¶ü</button>
        </div>
    </div>
    
    <div id="main-wrapper">
        <header>
            <button id="menu-icon" onclick="toggleMenu()">‚ò∞</button>
            <h1>DHRUVA POWER</h1>
            <p id="userEmailDisplay" style="display: none;"></p>
        </header>

        <div id="auth-view">
            <div class="auth-box">
                <h2 id="authTitle">‡¶≤‡¶ó‡¶á‡¶®</h2>
                <input type="email" id="email" placeholder="‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶á‡¶Æ‡ßá‡¶á‡¶≤ ‡¶¶‡¶ø‡¶®">
                <input type="password" id="password" placeholder="‡¶™‡¶æ‡¶∏‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶° ‡¶¶‡¶ø‡¶® (‡¶Ö‡¶®‡ßç‡¶§‡¶§ ‡ß¨ ‡¶∏‡¶Ç‡¶ñ‡ßç‡¶Ø‡¶æ)">
                
                <button onclick="loginUser()" id="loginBtn">‡¶≤‡¶ó‡¶á‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</button>
                <button onclick="registerUser()" id="regBtn" style="display:none;">‡¶®‡¶§‡ßÅ‡¶® ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶ñ‡ßÅ‡¶≤‡ßÅ‡¶®</button>
                
                <p id="toggleText" onclick="toggleAuthMode()">‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶®‡ßá‡¶á? <span>‡¶®‡¶§‡ßÅ‡¶® ‡¶ñ‡ßÅ‡¶≤‡ßÅ‡¶®</span></p>
                <p id="authError" style="color:red; font-size:14px;"></p>
            </div>
        </div>

        <div id="content" style="display: none;">
            <h2 id="currentViewTitle">‡¶°‡ßç‡¶Ø‡¶æ‡¶∂‡¶¨‡ßã‡¶∞‡ßç‡¶°</h2>

            <div id="dashboard-view">
                <div id="settings" class="settings-box">
                    <h4>‡¶¶‡ßà‡¶®‡¶ø‡¶ï ‡¶¨‡ßá‡¶§‡¶® ‡¶π‡¶æ‡¶∞ (Daily Rate)</h4>
                    <input type="number" id="dailyRateInput" placeholder="‡¶ü‡¶æ‡¶ï‡¶æ‡¶∞ ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£">
                    <button onclick="updateDailyRate()" id="rateSaveBtn">‡¶∏‡ßá‡¶≠ ‡¶ï‡¶∞‡ßÅ‡¶®</button>
                </div>
                
                <div id="finance-section">
                    <div class="card income">
                        <h4>‡¶Æ‡ßã‡¶ü ‡¶Ü‡¶Ø‡¶º (‡¶∏‡¶ï‡¶≤ ‡¶∏‡¶Æ‡¶Ø‡¶º‡ßá‡¶∞)</h4>
                        <h2 id="totalIncome">‡ß≥ 0</h2>
                    </div>
                    <div class="card expense">
                        <h4>‡¶Æ‡ßã‡¶ü ‡¶§‡ßã‡¶≤‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá (‡¶∏‡¶ï‡¶≤ ‡¶∏‡¶Æ‡¶Ø‡¶º‡ßá‡¶∞)</h4>
                        <h2 id="totalWithdraw">‡ß≥ 0</h2>
                    </div>
                    <div class="card balance">
                        <h4>‡¶¨‡¶∞‡ßç‡¶§‡¶Æ‡¶æ‡¶® ‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏</h4>
                        <h2 id="currentBalance">‡ß≥ 0</h2>
                    </div>
                </div>

                <h6 id="lastDateMsg">‡¶∂‡ßá‡¶∑ ‡¶è‡¶®‡ßç‡¶ü‡ßç‡¶∞‡¶ø: <span id="lastDate">--/--/----</span></h6>

                <div id="buttons">
                    <h4>‡¶Ü‡¶ú‡¶ï‡ßá ‡¶ï‡¶ø ‡¶Ü‡¶™‡¶®‡¶ø ‡¶ï‡¶æ‡¶ú‡ßá ‡¶ó‡¶ø‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡¶®? (‡¶¶‡ßà‡¶®‡¶ø‡¶ï ‡¶π‡¶æ‡¶∞: <span id="displayDailyRate">‡ß≥ 400</span>)</h4>
                    <button id="presentBtn" onclick="markAttendance('Present')">‡¶π‡ßç‡¶Ø‡¶æ‡¶Å (‡¶â‡¶™‡¶∏‡ßç‡¶•‡¶ø‡¶§)</button>
                    <button id="absentBtn" onclick="markAttendance('Absent')">‡¶®‡¶æ (‡¶Ö‡¶®‡ßÅ‡¶™‡¶∏‡ßç‡¶•‡¶ø‡¶§)</button>
                </div>

                <div class="withdraw-box past-data-box">
                    <h4>üìÖ ‡¶Ö‡¶§‡ßÄ‡¶§ ‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ‡ßá‡¶∞ ‡¶°‡ßá‡¶ü‡¶æ ‡¶è‡¶®‡ßç‡¶ü‡ßç‡¶∞‡¶ø</h4>
                    <p>‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™ ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶Ü‡¶ó‡ßá‡¶∞ ‡¶§‡¶•‡ßç‡¶Ø ‡¶∏‡ßá‡¶≠ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§</p>
                    <input type="date" id="pastDateInput" style="width: 100%;">
                    
                    <button onclick="markPastAttendance('Present')">‡¶â‡¶™‡¶∏‡ßç‡¶•‡¶ø‡¶§‡¶ø ‡¶¶‡¶ø‡¶®</button>
                    <button onclick="markPastAttendance('Absent')">‡¶Ö‡¶®‡ßÅ‡¶™‡¶∏‡ßç‡¶•‡¶ø‡¶§‡¶ø ‡¶¶‡¶ø‡¶®</button>
                </div>

                <div class="withdraw-box">
                    <h4>‡¶ü‡¶æ‡¶ï‡¶æ ‡¶§‡ßÅ‡¶≤‡¶§‡ßá ‡¶ö‡¶æ‡¶®?</h4>
                    <input type="number" id="withdrawAmount" placeholder="‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£ (‡¶ü‡¶æ‡¶ï‡¶æ)">
                    <input type="text" id="withdrawReason" placeholder="‡¶ï‡¶æ‡¶∞‡¶£">
                    <button onclick="withdrawMoney()" class="w-btn">‡¶ü‡¶æ‡¶ï‡¶æ ‡¶§‡ßÅ‡¶≤‡ßÅ‡¶®</button>
                </div>
            </div>

            <div id="monthly-report-view" style="display: none;">
                <div class="monthly-nav">
                    <button onclick="changeMonth(-1)">‚Üê ‡¶™‡ßÇ‡¶∞‡ßç‡¶¨‡¶¨‡¶∞‡ßç‡¶§‡ßÄ ‡¶Æ‡¶æ‡¶∏</button>
                    <h3 id="currentMonthYear">‡¶°‡¶ø‡¶∏‡ßá‡¶Æ‡ßç‡¶¨‡¶∞ ‡ß®‡ß¶‡ß®‡ß´</h3>
                    <button onclick="changeMonth(1)">‡¶™‡¶∞‡¶¨‡¶∞‡ßç‡¶§‡ßÄ ‡¶Æ‡¶æ‡¶∏ ‚Üí</button>
                </div>
                
                <div id="day">
                    <div class="stat-box">
                        <h4>‡¶Æ‡¶æ‡¶∏‡¶ø‡¶ï ‡¶â‡¶™‡¶∏‡ßç‡¶•‡¶ø‡¶§‡¶ø</h4>
                        <h2 id="monthlyPresent">00</h2>
                    </div>
                    <div class="stat-box">
                        <h4>‡¶Æ‡¶æ‡¶∏‡¶ø‡¶ï ‡¶Ö‡¶®‡ßÅ‡¶™‡¶∏‡ßç‡¶•‡¶ø‡¶§‡¶ø</h4>
                        <h2 id="monthlyAbsent">00</h2>
                    </div>
                    <div class="stat-box">
                        <h4>‡¶Æ‡ßã‡¶ü ‡¶Æ‡¶æ‡¶∏‡¶ø‡¶ï ‡¶Ü‡¶Ø‡¶º</h4>
                        <h2 id="monthlyIncome">‡ß≥ 0</h2>
                    </div>
                </div>

                <h3>‡¶â‡¶™‡¶∏‡ßç‡¶•‡¶ø‡¶§‡¶ø‡¶∞ ‡¶ï‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶°‡¶æ‡¶∞</h3>
                <div class="calendar-grid-wrapper">
                    <div class="calendar-grid">
                        <div class="calendar-header">‡¶∞‡¶¨‡¶ø</div>
                        <div class="calendar-header">‡¶∏‡ßã‡¶Æ</div>
                        <div class="calendar-header">‡¶Æ‡¶ô‡ßç‡¶ó‡¶≤</div>
                        <div class="calendar-header">‡¶¨‡ßÅ‡¶ß</div>
                        <div class="calendar-header">‡¶¨‡ßÉ‡¶π‡¶É</div>
                        <div class="calendar-header">‡¶∂‡ßÅ‡¶ï‡ßç‡¶∞</div>
                        <div class="calendar-header">‡¶∂‡¶®‡¶ø</div>
                    </div>
                    <div id="calendarDays" class="calendar-grid">
                        </div>
                </div>
            </div>

            <div id="history-view" style="display: none;">
                <h3>‡¶≤‡ßá‡¶®‡¶¶‡ßá‡¶® ‡¶¨‡¶ø‡¶¨‡¶∞‡¶£‡ßÄ (Statement)</h3>
                <p>‡¶è‡¶á ‡¶§‡¶æ‡¶≤‡¶ø‡¶ï‡¶æ‡¶ü‡¶ø ‡¶ï‡ßá‡¶¨‡¶≤ ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶ø‡¶§ ‡¶Æ‡¶æ‡¶∏‡ßá‡¶∞ ‡¶≤‡ßá‡¶®‡¶¶‡ßá‡¶® ‡¶¶‡ßá‡¶ñ‡¶æ‡¶ö‡ßç‡¶õ‡ßá‡•§</p>
                <div id="statement-area">
                    <table id="historyTable">
                        <thead>
                            <tr>
                                <th>‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ</th>
                                <th>‡¶¨‡¶ø‡¶¨‡¶∞‡¶£</th>
                                <th>‡¶Ö‡¶¨‡¶∏‡ßç‡¶•‡¶æ</th>
                                <th>‡¶ü‡¶æ‡¶ï‡¶æ</th>
                                <th>‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏</th>
                            </tr>
                        </thead>
                        <tbody id="historyBody"></tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
    
    <div id="overlay" onclick="toggleMenu()"></div>

</body>
</html>