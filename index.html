<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DHRUVA POWER - Manager</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.2/html2pdf.bundle.min.js"></script>
    <script type="module" src="main.js"></script>
</head>
<body>
    
    <div id="side-menu">
        <div class="menu-header">
            <h3 id="menuEmailDisplay">User</h3>
            <button class="close-btn" onclick="toggleMenu()">├Ч</button>
        </div>
        
        <div class="menu-items">
            <button onclick="showSection('dashboard-view'); toggleMenu()">ЁЯПа ржбрзНржпрж╛рж╢ржмрзЛрж░рзНржб</button>
            <button onclick="showSection('monthly-report-view'); toggleMenu()">ЁЯУЕ ржорж╛рж╕рж┐ржХ рж░рж┐ржкрзЛрж░рзНржЯ</button>
            <button onclick="showSection('history-view'); toggleMenu()">ЁЯУЬ рж▓рзЗржиржжрзЗржи ржЗрждрж┐рж╣рж╛рж╕</button>
            
            <button onclick="showSection('chat-view'); toggleMenu()">ЁЯТм ржпрзЛржЧрж╛ржпрзЛржЧ/ржЪрзНржпрж╛ржЯ</button>
            
            <button onclick="showSection('settings-view'); toggleMenu()">тЪЩя╕П рж╕рзЗржЯрж┐ржВрж╕ ржУ ржЯрзБрж▓рж╕</button>
            <button onclick="downloadPDF(); toggleMenu()">тмЗя╕П PDF ржбрж╛ржЙржирж▓рзЛржб</button>
            
            <div class="separator"></div>

            <button onclick="logoutUser()" class="logout-btn">рж▓ржЧ-ржЖржЙржЯ</button>
        </div>
    </div>
    
    <div id="main-wrapper">
        <header>
            <button id="menu-icon" onclick="toggleMenu()">тШ░</button>
            <h1>DHRUVA POWER</h1>
            <p id="userEmailDisplay" style="display: none;"></p>
        </header>

        <div id="auth-view">
            <div class="auth-box">
                <h2 id="authTitle">рж▓ржЧржЗржи</h2>
                <input type="email" id="email" placeholder="ржЖржкржирж╛рж░ ржЗржорзЗржЗрж▓ ржжрж┐ржи">
                <input type="password" id="password" placeholder="ржкрж╛рж╕ржУрзЯрж╛рж░рзНржб ржжрж┐ржи (ржЕржирзНрждржд рзм рж╕ржВржЦрзНржпрж╛)">
                
                <button onclick="loginUser()" id="loginBtn">рж▓ржЧржЗржи ржХрж░рзБржи</button>
                <button onclick="registerUser()" id="regBtn" style="display:none;">ржирждрзБржи ржЕрзНржпрж╛ржХрж╛ржЙржирзНржЯ ржЦрзБрж▓рзБржи</button>
                
                <p id="toggleText" onclick="toggleAuthMode()">ржЕрзНржпрж╛ржХрж╛ржЙржирзНржЯ ржирзЗржЗ? <span>ржирждрзБржи ржЦрзБрж▓рзБржи</span></p>
                <p id="authError" style="color:red; font-size:14px;"></p>
            </div>
        </div>

        <div id="content" style="display: none;">
            <h2 id="currentViewTitle">ржбрзНржпрж╛рж╢ржмрзЛрж░рзНржб</h2>

            <div id="dashboard-view">
                
                <div id="finance-section">
                    <div class="card balance-card">
                        <h4>ржмрж░рзНрждржорж╛ржи ржмрзНржпрж╛рж▓рзЗржирзНрж╕</h4>
                        <h2 id="currentBalance">рз│ 0</h2>
                    </div>
                    <div class="row-cards">
                        <div class="card income-card">
                            <h4>ржорзЛржЯ ржЖржпрж╝</h4>
                            <h3 id="totalIncome">рз│ 0</h3>
                        </div>
                        <div class="card expense-card">
                            <h4>ржорзЛржЯ рждрзЛрж▓рж╛</h4>
                            <h3 id="totalWithdraw">рз│ 0</h3>
                        </div>
                    </div>
                </div>

                <div class="divider"></div>

                <div id="buttons">
                    <h6 id="lastDateMsg">рж╢рзЗрж╖ ржЕрзНржпрж╛ржХрж╢ржи: <span id="lastDate">--/--/----</span></h6>
                    <h4>ржЖржЬржХрзЗрж░ ржЙржкрж╕рзНржерж┐рждрж┐ ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рзБржи</h4>
                    <p style="font-size: 12px; color: #666; margin-bottom: 10px;">(ржмрж░рзНрждржорж╛ржи рж░рзЗржЯ: <span id="displayDailyRate">рз│ 400</span>)</p>
                    
                    <div class="action-btn-group">
                        <button id="presentBtn" onclick="markAttendance('Present')">тЬЕ ржЙржкрж╕рзНржерж┐ржд (Present)</button>
                        <button id="absentBtn" onclick="markAttendance('Absent')">тЭМ ржЕржирзБржкрж╕рзНржерж┐ржд (Absent)</button>
                    </div>
                </div>
            </div>

            <div id="monthly-report-view" style="display: none;">
                <div class="monthly-nav">
                    <button onclick="changeMonth(-1)">тЭо</button>
                    <h3 id="currentMonthYear">ржорж╛рж╕ ржмржЫрж░</h3>
                    <button onclick="changeMonth(1)">тЭп</button>
                </div>
                
                <div id="day">
                    <div class="stat-box present-box">
                        <h4>ржЙржкрж╕рзНржерж┐ржд</h4>
                        <h2 id="monthlyPresent">0</h2>
                    </div>
                    <div class="stat-box absent-box">
                        <h4>ржЕржирзБржкрж╕рзНржерж┐ржд</h4>
                        <h2 id="monthlyAbsent">0</h2>
                    </div>
                    <div class="stat-box money-box">
                        <h4>ржорзЛржЯ ржЖржпрж╝</h4>
                        <h2 id="monthlyIncome">рз│ 0</h2>
                    </div>
                </div>

                <h3>ржХрзНржпрж╛рж▓рзЗржирзНржбрж╛рж░ ржнрж┐ржЙ</h3>
                <div class="calendar-grid-wrapper">
                    <div class="calendar-grid header-grid">
                        <div>рж░ржмрж┐</div><div>рж╕рзЛржо</div><div>ржоржЩрзНржЧрж▓</div><div>ржмрзБржз</div><div>ржмрзГрж╣ржГ</div><div>рж╢рзБржХрзНрж░</div><div>рж╢ржирж┐</div>
                    </div>
                    <div id="calendarDays" class="calendar-grid"></div>
                </div>
            </div>

            <div id="history-view" style="display: none;">
                <div class="section-header">
                    <h3>рж▓рзЗржиржжрзЗржи ржмрж┐ржмрж░ржгрзА</h3>
                    <span style="font-size: 12px; color: #666;">(ржмрж░рзНрждржорж╛ржи ржорж╛рж╕)</span>
                </div>
                <div id="statement-area">
                    <table id="historyTable">
                        <thead>
                            <tr>
                                <th>рждрж╛рж░рж┐ржЦ</th>
                                <th>ржмрж┐ржмрж░ржг</th>
                                <th>ржЯрж╛ржХрж╛</th>
                                <th>ржмрзНржпрж╛рж▓рзЗржирзНрж╕</th>
                            </tr>
                        </thead>
                        <tbody id="historyBody"></tbody>
                    </table>
                </div>
            </div>

            <div id="chat-view" style="display: none;">
                <div class="section-header">
                    <h3>ЁЯТм ржпрзЛржЧрж╛ржпрзЛржЧ/ржЪрзНржпрж╛ржЯ</h3>
                    <span style="font-size: 12px; color: #666;">(ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг ржпрзЛржЧрж╛ржпрзЛржЧ)</span>
                </div>
                
                <div style="margin-bottom: 15px; text-align: center;">
                    <button onclick="requestNotificationPermission()" class="btn-primary" style="background-color: #f39c12; width: auto; padding: 10px 15px; border-radius: 8px;">ржирзЛржЯрж┐ржлрж┐ржХрзЗрж╢ржи ржЪрж╛рж▓рзБ ржХрж░рзБржи</button>
                    <p id="notificationStatus" style="font-size: 12px; color: #7f8c8d; margin-top: 5px;"></p>
                </div>

                <div id="chat-messages">
                    </div>

                <div class="chat-input-area">
                    <input type="text" id="chatInput" placeholder="ржЖржкржирж╛рж░ ржорзЗрж╕рзЗржЬ рж▓рж┐ржЦрзБржи..." onkeypress="if(event.keyCode == 13) sendMessage()">
                    <button onclick="sendMessage()" id="sendMsgBtn">тЬЙя╕П ржкрж╛ржарж╛ржи</button>
                </div>
                
                <div style="margin-top: 15px; text-align: center; border-top: 1px solid #eee; padding-top: 15px;">
                    <h4>рж╕рж░рж╛рж╕рж░рж┐ ржпрзЛржЧрж╛ржпрзЛржЧ:</h4>
                    <a href="tel:+8801700000000" class="btn-primary" style="background-color: #2ecc71; text-decoration: none; display: block; width: 100%; box-sizing: border-box; padding: 10px; border-radius: 8px;">
                        ЁЯУЮ ржЕржлрж┐рж╕/ржорзНржпрж╛ржирзЗржЬрж╛рж░ржХрзЗ ржХрж▓ ржХрж░рзБржи
                    </a>
                    <p style="font-size: 11px; color: #7f8c8d; margin-top: 5px;">ржХрж▓ ржХрж░рждрзЗ ржмрж╛ржЯржиржЯрж┐ ржкрзНрж░рзЗрж╕ ржХрж░рзБржиред</p>
                </div>
            </div>
            <div id="settings-view" style="display: none;">
                
                <div class="settings-card withdraw-card-style">
                    <div class="card-header">
                        <h3>ЁЯТ╕ ржЯрж╛ржХрж╛ ржЙрждрзНрждрзЛрж▓ржи (Withdraw)</h3>
                    </div>
                    <div class="card-body">
                        <input type="number" id="withdrawAmount" placeholder="ржкрж░рж┐ржорж╛ржг (ржЯрж╛ржХрж╛)">
                        <input type="text" id="withdrawReason" placeholder="ржХрж╛рж░ржг (ржпрзЗржоржи: ржЦрж░ржЪ, ржмрзНржпржХрзНрждрж┐ржЧржд)">
                        <button onclick="withdrawMoney()" class="w-btn">ржЯрж╛ржХрж╛ рждрзБрж▓рзБржи</button>
                    </div>
                </div>

                <div class="settings-card">
                    <div class="card-header">
                        <h3>ЁЯУЕ ржЕрждрзАржд рждрж╛рж░рж┐ржЦрзЗрж░ ржПржирзНржЯрзНрж░рж┐</h3>
                    </div>
                    <div class="card-body">
                        <p style="font-size: 13px; color: #666; margin-bottom: 8px;">ржнрзБрж▓ржмрж╢ржд ржХрзЛржирзЛ ржжрж┐ржи ржмрж╛ржж ржкрзЬрж▓рзЗ ржПржЦрж╛ржи ржерзЗржХрзЗ ржарж┐ржХ ржХрж░рзБржиред</p>
                        <input type="date" id="pastDateInput" style="width: 100%;">
                        <div class="btn-row">
                            <button onclick="markPastAttendance('Present')" class="btn-outline-success">ржЙржкрж╕рзНржерж┐ржд</button>
                            <button onclick="markPastAttendance('Absent')" class="btn-outline-danger">ржЕржирзБржкрж╕рзНржерж┐ржд</button>
                        </div>
                    </div>
                </div>

                <div class="settings-card">
                    <div class="card-header">
                        <h3>тЪЩя╕П ржмрзЗрждржи ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи</h3>
                    </div>
                    <div class="card-body input-group">
                        <label>ржжрзИржирж┐ржХ рж░рзЗржЯ (ржЯрж╛ржХрж╛):</label>
                        <div style="display: flex; gap: 10px;">
                            <input type="number" id="dailyRateInput" placeholder="400">
                            <button onclick="updateDailyRate()" id="rateSaveBtn">рж╕рзЗржн</button>
                        </div>
                    </div>
                </div>

            </div>

        </div>
    </div>
    
    <div id="overlay" onclick="toggleMenu()"></div>

</body>
</html>